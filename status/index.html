<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>virtauto.OS — Live System Status</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #050816;
      --card-bg: #0b1020;
      --accent: #8b5cf6;
      --accent-soft: rgba(139, 92, 246, 0.1);
      --ok: #22c55e;
      --warn: #f59e0b;
      --crit: #ef4444;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #111827 0, #020617 55%, #000 100%);
      color: var(--text);
      padding: 2.5rem 1.5rem 3rem;
    }

    .page {
      max-width: 1120px;
      margin: 0 auto;
    }

    header {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 2.5rem;
    }

    header h1 {
      font-size: 2rem;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    header h1 span.badge {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      background: var(--accent-soft);
      border: 1px solid rgba(139, 92, 246, 0.4);
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      color: var(--accent);
    }

    header p {
      max-width: 640px;
      font-size: 0.95rem;
      color: var(--muted);
    }

    .meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 2rem;
    }

    .meta-pill {
      font-size: 0.8rem;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(55, 65, 81, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      color: var(--muted);
    }

    .meta-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
    }

    main {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.4fr);
      gap: 1.5rem;
    }

    @media (max-width: 900px) {
      main {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: radial-gradient(circle at top left, #111827 0, #020617 55%);
      border-radius: 1.1rem;
      border: 1px solid var(--border);
      padding: 1.3rem 1.4rem 1.3rem;
      box-shadow: 0 18px 45px rgba(0, 0, 0, 0.6);
    }

    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1rem;
      gap: 0.75rem;
    }

    .card-header h2 {
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .status-pill {
      font-size: 0.75rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 0.25rem 0.65rem;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .status-pill span.dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--ok);
    }
    .status-pill.warn span.dot {
      background: var(--warn);
    }
    .status-pill.crit span.dot {
      background: var(--crit);
    }

    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 0.85rem;
    }

    .status-card {
      border-radius: 0.9rem;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 0.8rem 0.9rem;
      background: linear-gradient(
        135deg,
        rgba(15, 23, 42, 0.95),
        rgba(15, 23, 42, 0.85)
      );
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .status-title-row {
      display: flex;
      justify-content: space-between;
      gap: 0.4rem;
      align-items: center;
    }

    .status-title {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .status-chip {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.95);
    }

    .status-chip.ok {
      border-color: rgba(34, 197, 94, 0.65);
      color: #bbf7d0;
    }
    .status-chip.warn {
      border-color: rgba(245, 158, 11, 0.75);
      color: #fed7aa;
    }
    .status-chip.soon {
      border-style: dashed;
      border-color: rgba(148, 163, 184, 0.7);
      color: var(--muted);
    }

    .status-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem 0.6rem;
      font-size: 0.7rem;
      color: var(--muted);
    }

    .status-meta span {
      opacity: 0.9;
    }

    .status-note {
      font-size: 0.75rem;
      color: var(--muted);
      margin-top: 0.2rem;
      line-height: 1.3;
    }

    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.7rem;
    }

    .kpi {
      border-radius: 0.85rem;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: radial-gradient(circle at top left, #111827 0, #020617 70%);
      padding: 0.7rem 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .kpi-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      color: var(--muted);
    }

    .kpi-value {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .kpi-footnote {
      font-size: 0.7rem;
      color: var(--muted);
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-size: 0.8rem;
    }

    .timeline-step {
      display: flex;
      gap: 0.6rem;
      align-items: flex-start;
    }

    .timeline-bullet {
      margin-top: 0.25rem;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
    }

    .timeline-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
      margin-bottom: 0.1rem;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.7rem;
      color: var(--muted);
      text-align: right;
    }

    footer span {
      color: var(--accent);
    }
  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>
        virtauto.OS — Live System Status
        <span class="badge">V1.0 PREVIEW</span>
      </h1>
      <p>
        This dashboard provides a high-level view of the current health of
        <strong>www.virtauto.de</strong> as an Agentic Website: self-guarded,
        monitored and operated by a growing Multi-Agent System.
      </p>
      <div class="meta-row">
        <div class="meta-pill">
          <span class="meta-dot"></span>
          Agentic Website — Live in Production
        </div>
        <div class="meta-pill">Autonomy: <strong>in progress → 30%+ target</strong></div>
        <div class="meta-pill">Version: V1.0 (Launch Window)</div>
      </div>
    </header>

    <main>
      <!-- LEFT: AGENTS & LAYERS -->
      <section class="card">
        <div class="card-header">
          <h2>Core Agents & Layers</h2>
          <span class="status-pill">
            <span class="dot"></span>
            System Online
          </span>
        </div>

        <div class="status-grid">
          <!-- Self-Guardian -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Self-Guardian</div>
              <div class="status-chip ok">Active</div>
            </div>
            <div class="status-meta">
              <span>Security</span>
              <span>Policy checks</span>
              <span>Fail-safe guardrails</span>
            </div>
            <p class="status-note">
              Monitors every change, applies Guardian rules and blocks unsafe
              updates before they reach production.
            </p>
          </article>

          <!-- Monitoring -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Self-Monitoring</div>
              <div class="status-chip ok">Active</div>
            </div>
            <div class="status-meta">
              <span>Workflow logs</span>
              <span>Status signals</span>
            </div>
            <p class="status-note">
              Tracks CI/CD runs, agent activity and basic system health across
              GitHub Actions.
            </p>
          </article>

          <!-- Self-Content -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Self-Content Agent</div>
              <div class="status-chip ok">Active</div>
            </div>
            <div class="status-meta">
              <span>Draft generation</span>
              <span>Pull request content</span>
            </div>
            <p class="status-note">
              Generates content drafts and change proposals as pull requests for
              human-in-the-loop review.
            </p>
          </article>

          <!-- GEORGE -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">GEORGE Orchestrator</div>
              <div class="status-chip warn">MVP in Progress</div>
            </div>
            <div class="status-meta">
              <span>Event routing</span>
              <span>Agent registry</span>
            </div>
            <p class="status-note">
              Coordinates when which agent should run. MVP rules exist; full
              orchestration logic is being expanded.
            </p>
          </article>

          <!-- RAG Layer -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">RAG Knowledge Layer</div>
              <div class="status-chip ok">Initialized</div>
            </div>
            <div class="status-meta">
              <span>docs-001 …</span>
              <span>Vector embeddings</span>
            </div>
            <p class="status-note">
              Stores the long-term memory of virtauto.de — system overview,
              Self-Guardian architecture and CDT vision.
            </p>
          </article>

          <!-- Cognitive Digital Twin -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Cognitive Digital Twin (CDT)</div>
              <div class="status-chip soon">Concept Stage</div>
            </div>
            <div class="status-meta">
              <span>Long-term intent</span>
              <span>Roadmap</span>
            </div>
            <p class="status-note">
              Defines the long-term “brain” of virtauto.OS — how agents,
              memory and strategy evolve over time.
            </p>
          </article>

          <!-- Audit Agent -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Audit Agent</div>
              <div class="status-chip warn">Planned</div>
            </div>
            <div class="status-meta">
              <span>Compliance</span>
              <span>Change logs</span>
            </div>
            <p class="status-note">
              Will verify that every change is fully documented, reversible and
              aligned with compliance rules.
            </p>
          </article>

          <!-- Deploy Agent -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Deploy Agent</div>
              <div class="status-chip warn">Planned</div>
            </div>
            <div class="status-meta">
              <span>Safe rollout</span>
              <span>Auto rollback</span>
            </div>
            <p class="status-note">
              Will handle fully automated, guarded deployments from
              pull-request merge to live system.
            </p>
          </article>

          <!-- Content Agent -->
          <article class="status-card">
            <div class="status-title-row">
              <div class="status-title">Marketing Content Agent</div>
              <div class="status-chip warn">Planned</div>
            </div>
            <div class="status-meta">
              <span>Articles</span>
              <span>Launch posts</span>
            </div>
            <p class="status-note">
              Will autonomously propose blog posts, release notes and LinkedIn
              updates based on real system changes.
            </p>
          </article>
        </div>
      </section>

      <!-- RIGHT: KPI + ROADMAP -->
      <aside class="card">
        <div class="card-header">
          <h2>System KPIs</h2>
          <span class="status-pill warn">
            <span class="dot"></span>
            V1.0 Launch Window
          </span>
        </div>

        <div class="kpi-grid">
          <div class="kpi">
            <div class="kpi-label">Agent Health</div>
            <div class="kpi-value">4 / 7</div>
            <div class="kpi-footnote">Core agents operational today</div>
          </div>
        <div class="kpi">
          <div class="kpi-label">Autonomy Level</div>
          <div class="kpi-value" id="autonomy-level">—</div>
          <div class="kpi-footnote" id="autonomy-note">Target: —</div>
        </div>
          <div class="kpi">
            <div class="kpi-label">CI/CD Workflows</div>
            <div class="kpi-value">17</div>
            <div class="kpi-footnote">Industrial-grade pipeline backbone</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Open PRs</div>
            <div class="kpi-value">34</div>
            <div class="kpi-footnote">High development velocity</div>
          </div>
          <div class="kpi">
            <div class="kpi-label">Health Score</div>
            <div class="kpi-value" id="health-score">—</div>
            <div class="kpi-footnote" id="health-note">Overall system health</div>
          </div>
        </div>

        <hr style="border: none; border-top: 1px solid var(--border); margin: 1.2rem 0;" />

        <div class="card-header" style="margin-bottom: 0.7rem;">
          <h2>Launch Roadmap</h2>
        </div>

        <div class="timeline">
          <div class="timeline-step">
            <div class="timeline-bullet"></div>
            <div>
              <div class="timeline-label">Now → V1.0 Stabilization</div>
              <div>
                • RAG knowledge base seeded (docs-001 …)<br />
                • Self-Guardian + Monitoring fully active<br />
                • Status dashboard online (this page)
              </div>
            </div>
          </div>

          <div class="timeline-step">
            <div class="timeline-bullet"></div>
            <div>
              <div class="timeline-label">Next 72h</div>
              <div>
                • Activate Audit, Deploy and Content Agents (MVP)<br />
                • Finish GEORGE orchestration rules<br />
                • Reduce active branches and stabilize pipelines
              </div>
            </div>
          </div>

          <div class="timeline-step">
            <div class="timeline-bullet"></div>
            <div>
              <div class="timeline-label">7-Day Target</div>
              <div>
                • ≥30% autonomous operations<br />
                • Full self-healing loop for deployments<br />
                • virtauto.de operating as a living agentic organism
              </div>
            </div>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      Status page generated by <span>virtauto.OS</span> &mdash; Agentic Website
      Experiment.
    </footer>
  </div>
<script>
fetch('/status/status.json', { cache: 'no-store' })
  .then(res => res.json())
  .then(status => {
    // accept multiple possible keys + accept strings like "80" or "80%"
    const raw =
      status.health_score ??
      status.health ??
      status.overall_health ??
      status.system_health ??
      status.overall_health_score;

    const num = (typeof raw === 'number')
      ? raw
      : (typeof raw === 'string' ? parseFloat(raw.replace('%','')) : NaN);

    document.getElementById('health-score').textContent =
      Number.isFinite(num) ? (num.toFixed(1) + ' %') : '—';

    // optional: show system mode if present (several key variants)
    const mode = status.system_mode ?? status.mode ?? status.system_status ?? null;
    if (mode) document.getElementById('health-note').textContent = `System mode: ${mode}`;
  })
  // =========================
// Autonomy Level
// =========================
const autonomyRaw =
  status.autonomy_level ??
  status.autonomy ??
  status.autonomy_level_estimate;

const autonomyNum =
  typeof autonomyRaw === 'number'
    ? autonomyRaw
    : (typeof autonomyRaw === 'string'
        ? parseFloat(autonomyRaw.replace('%',''))
        : NaN);

document.getElementById('autonomy-level').textContent =
  Number.isFinite(autonomyNum)
    ? autonomyNum.toFixed(1) + ' %'
    : '—';

// Target (optional)
if (status.autonomy_target !== undefined) {
  document.getElementById('autonomy-note').textContent =
    `Target: ${status.autonomy_target}% autonomous operations`;
}
  .catch(err => {
    console.warn('Health score not available', err);
    document.getElementById('health-score').textContent = '—';
    console.warn('Status KPIs not available', err);
  });
</script>
</body>
</html>
